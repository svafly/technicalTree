# MySQL实战
<!-- GFM-TOC -->
* [基础篇](#基础篇)
    * [01｜基础架构：一条SQL查询语句是如何执行的？](#01｜基础架构：一条SQL查询语句是如何执行的？)
    * [02｜日志系统：一条SQL更新语句是如何执行的？](#02｜日志系统：一条SQL更新语句是如何执行的？)
* [实践篇](#实践篇)
<!-- GFM-TOC -->
## 01｜基础架构：一条SQL查询语句是如何执行的？
我们经常说，看一个事儿千万不要直接陷入细节里，你应该先鸟瞰其全貌，这样能够帮助你从高维度理解问题。

比如，你有个最简单的表，表里只有一个 ID 字段，在执行下面这个查询语句时：
```sql
mysql> select * from T where ID=10；
```
我们只知道它返回了一个结构，那么它内部是如何工作的呢？

下面我给出的是 MySQL 的基本架构示意图，从中你可以清楚地看到 SQL 语句在 MySQL 的各个功能模块中的执行过程。

<div align="center"> <img src="https://static001.geekbang.org/resource/image/0d/d9/0d2070e8f84c4801adbfa03bda1f98d9.png"/> </div><br>

## 02｜日志系统：一条SQL更新语句是如何执行的？
一条查询语句的执行过程一般是经过连接器、分析器、优化器、执行器等功能模块，最后到达存储引擎。（MYSQL8.0之后删除了查询缓存模块）

那么，一条更新语句的执行流程又是怎样的呢？（MYSQL可以恢复到半个月内任意一秒的状态）

还是从一个表的一条更新语句说起，下面是这个表的创建语句，这个表有一个主键ID和一个整型字段c：
```sql
mysql> create table T(ID int primary key, c int);
```
如果要将ID=2这一行的值加1，SQL语句就会这么写：
```sql
mysql> update T set c=c+1 where ID=2;
```
分析器会通过词法和语法解析知道这是一条更新语句。优化器决定要使用ID这个索引。然后执行器负责具体执行，找到这一行，然后更新。

与查询流程不一样的是，更新流程还涉及两个重要的日志模块，它们正是这一节要讨论的主角：redo log（重做日志）和binlog（归档日志）（只要我们写的是DML语句（insert，update，delete，create）等等，那么我们在数据库服务端执行的时候就会涉及到这个两个日志的变动。）。
### 重要的日志模块：redo log
